<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Group 11">

<title>Project Proposal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../Proposal/Proposal.html" aria-current="page">
 <span class="menu-text">Proposal</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#project-motivation" id="toc-project-motivation" class="nav-link active" data-scroll-target="#project-motivation">Project Motivation</a></li>
  <li><a href="#approach" id="toc-approach" class="nav-link" data-scroll-target="#approach">Approach</a>
  <ul class="collapse">
  <li><a href="#scope" id="toc-scope" class="nav-link" data-scroll-target="#scope">Scope</a></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a></li>
  </ul></li>
  <li><a href="#visualisations-on-world-and-regional-maps" id="toc-visualisations-on-world-and-regional-maps" class="nav-link" data-scroll-target="#visualisations-on-world-and-regional-maps">Visualisations on World and Regional Maps</a></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
  <li><a href="#correlation-analysis" id="toc-correlation-analysis" class="nav-link" data-scroll-target="#correlation-analysis">Correlation Analysis</a></li>
  <li><a href="#country-clustering-analysis" id="toc-country-clustering-analysis" class="nav-link" data-scroll-target="#country-clustering-analysis">Country Clustering Analysis</a></li>
  <li><a href="#predictive-modelling" id="toc-predictive-modelling" class="nav-link" data-scroll-target="#predictive-modelling">Predictive Modelling</a></li>
  <li><a href="#packages-required" id="toc-packages-required" class="nav-link" data-scroll-target="#packages-required">Packages Required</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project Proposal</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Group 11 </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="project-motivation" class="level2">
<h2 class="anchored" data-anchor-id="project-motivation">Project Motivation</h2>
<p>The next Summer Olympics will take place from 26 July to 11 August 2024 in Paris, France. In the run-up to the event, our bosses at an online newspaper have asked Sports Desk (that’s us) to pitch an idea for a Special Report on the Olympics that will engage interest and increase readership.</p>
<p>Our Special Report will take the form of an R Shiny app comprising four sections:</p>
<ul>
<li><p>Interactive maps that allowing visitors to visualise how countries across the world compare in terms of Olympics performance or for any one of the top ten most popular Summer Olympic sports. Visitors may also compare the worldwide distribution of performance with that of factors that many might perceive as influencing performance, such as GDP per capita or country mean Body Mass Index.</p></li>
<li><p>Exploratory data analysis allowing visitors to deep dive into the statistical relationships between performance and potential explanatory variables chosen by the visitor</p></li>
<li><p>A section allowing readers to identify country clusters that might each have unique logistic regression models that predict performance success</p></li>
<li><p>A performance prediction dashboard using our identified multi-variate regression models and the option to modify parameters and observe changes in expected results</p></li>
</ul>
<p>The goal is to provide a user-friendly web-based application that allows reader to conduct their own data exploration and obtain insights to country and sport-level performance at the Summer Olympics.</p>
</section>
<section id="approach" class="level2">
<h2 class="anchored" data-anchor-id="approach">Approach</h2>
<section id="scope" class="level3">
<h3 class="anchored" data-anchor-id="scope">Scope</h3>
<ul>
<li><p>Summer Olympics from 1996 to 2020 inclusive. Both country-level and sport-level medal tallies will be included for Summer Olympics up to 2016. Due to data availability, sport-level medal tallies for 2020 will be limited to the top 10 most popular summer olympic sports.</p></li>
<li><p>Country medal tallies, selected macroeconomic and population-level data, as well as results across the 36 summer olympic sports, from 1996 to 2016, will be used in the exploratory data analysis, clustering and regression models. As Chinese Taipei is absent from our data source for macroeconomic and population-level data, it is omitted from our scope.</p></li>
<li><p>In the context of our predictive regression models, a “win” is considered as any win resulting in a Gold, Silver or Bronze medal.</p></li>
</ul>
</section>
<section id="data-sources" class="level3">
<h3 class="anchored" data-anchor-id="data-sources">Data Sources</h3>
<table class="table">
<thead>
<tr class="header">
<th>Data Attributes</th>
<th>Description</th>
<th>Source</th>
<th>Dataset Limitations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Olympic Medallists</td>
<td>Years 1996 to 2016. Dimensions: Sport, Gender, Age, Height, Eight, Country Represented, Host Country, Medal</td>
<td><p><a href="https://www.kaggle.com/heesoo37/120-years-of-olympic-history-athletes-and-results/version/2">Kaggle</a></p>
<p>(data scraped from <a href="http://www.sports-reference.com/">www.sports-reference.com</a>)</p></td>
<td><p>9,474/271,117 (3.5%) of records are missing age and height data.</p>
<p>60,171/271,116 (22.2%) are missing weight data.</p></td>
</tr>
<tr class="even">
<td>Country-level Medal Tally</td>
<td>Year 2020 (supplements the first dataset). Golds, Silvers and Bronzes.</td>
<td><a href="https://www.kaggle.com/datasets/berkayalan/2021-olympics-medals-in-tokyo?resource=download">Kaggle</a></td>
<td>Dataset includes only countries that won at least one medal.</td>
</tr>
<tr class="odd">
<td>Sport-level Medal Tally</td>
<td>Year 2020 (supplements the first dataset). Golds, Silvers and Bronzes.</td>
<td><a href="www.olympedia.org">www.olympedia.org</a></td>
<td>As this data is manually consolidated and will be used primarily for the map-wise visualisation, it will include only the top 10 most popular summer olympic sports.</td>
</tr>
<tr class="even">
<td>Population size</td>
<td>Years 1996 to 2020</td>
<td><a href="https://data.worldbank.org/indicator/SP.POP.TOTL">World Bank</a></td>
<td></td>
</tr>
<tr class="odd">
<td>Population average height</td>
<td>Years 1996 to 2016</td>
<td><a href="http://www.ncdrisc.org/data-downloads-height.html">NCDRisC</a></td>
<td>As data was not available past 2019, we will use only data up to 2016 (latest Summer Olympics year in the available dataset).</td>
</tr>
<tr class="even">
<td>Population average Body Mass Index (BMI)</td>
<td>Years 1996 to 2016</td>
<td><a href="https://www.ncdrisc.org/data-downloads-adiposity.html">NCDRisC</a></td>
<td>Data is not available past 2016.</td>
</tr>
<tr class="odd">
<td>Population average weight</td>
<td>Years 1996 to 2016</td>
<td>(Derived)</td>
<td>(Derived from height and BMI datasets.)</td>
</tr>
<tr class="even">
<td>Country land area</td>
<td></td>
<td><a href="https://data.worldbank.org/indicator/AG.LND.TOTL.K2">World Bank</a></td>
<td></td>
</tr>
<tr class="odd">
<td>GDP</td>
<td>Years 1996 to 2020</td>
<td><a href="https://data.worldbank.org/indicator/NY.GDP.MKTP.CD">World Bank</a></td>
<td></td>
</tr>
<tr class="even">
<td>Inflation rate</td>
<td>Years 1996 to 2020</td>
<td><a href="https://data.worldbank.org/indicator/FP.CPI.TOTL.ZG">World Bank</a></td>
<td>30 of 269 unique countries/regions are missing data</td>
</tr>
<tr class="odd">
<td>Energy use</td>
<td>Years 1996 to 2015</td>
<td><a href="https://data.worldbank.org/indicator/EG.USE.PCAP.KG.OE">World Bank</a></td>
<td>When joined with Summer Olympics participant countries, 20.1% records are missing data.</td>
</tr>
<tr class="even">
<td>Government expenditure on education</td>
<td>Years 1970 to 2019</td>
<td><a href="https://data.worldbank.org/indicator/SE.XPD.TOTL.GD.ZS?view=chart">World Bank</a></td>
<td>When joined with Summer Olympics participant countries, 32.5% of records are missing data.</td>
</tr>
</tbody>
</table>
<p>Data is consolidated into three datasets: Country-level (1996 to 2016), Sport-level (1996 to 2016) and 2020 (2020).</p>
</section>
</section>
<section id="visualisations-on-world-and-regional-maps" class="level2">
<h2 class="anchored" data-anchor-id="visualisations-on-world-and-regional-maps">Visualisations on World and Regional Maps</h2>
<p>The landing page for our data visualisations on shinyapps.io will feature an interactive world map. Below is a mock-up:</p>
<p><img src="landingpage_wireframe.jpg" class="img-fluid"></p>
<p><em>Comparing country performance at the Summer Olympics</em></p>
<p>Using a slider, the visitor is able to select any Summer Olympics from the years 1996 to 2020, to see how each country performed that year, based on total medals won.</p>
<p>In 2020, the New York Times was criticised by Chinese and Russian media outlets for putting the United States at the top of the Olympic medal ratings, based on total medals won. It was argued that what mattered was the number of Gold medals won. Others suggested a simple weighted total of 3:2:1 (for Gold medals : Silver medals : Bronze medals). To avoid provoking similar controversy with our Special Report, our interactive World Map will allow the user to select either one of the three performance indicators to visualise the comparative performance of countries. The user can select from “Gold Medals Won”, “Total Medals Won” and “Weighted”. The default would be “Weighted”.</p>
<p>Readers would likely be interested in knowing whether a country did better or worse than the previous Summer Olympics, given their choice of performance indicator. There will be another drop down menu where the user can choose to view the performance for the year, and whether performance had declined or improved. This will be demonstrated in gradient colour again, with performance in the current year shown as a percentage of performance in the previous Summer Olympics.</p>
<p><em>Comparing countries across Performance + one potential explanatory variable</em></p>
<p>Readers also have the choice to select a second map to visualise how countries differ in terms of an explanatory factor such as GDP, and compare both maps to observe for themselves if any patterns emerge.</p>
<p><em>Tooltips / Popovers</em></p>
<p>When the reader hovers over a country on the map, a Tooltip or Popover will appear, showing the country’s name and the performance indicator value. We will examine if it is feasible to include more details in the Tooltip or Popover, based on the level of reader interest it might generate.</p>
<p><em>Zoom into Asia</em></p>
<p>As the majority of our readership is Singaporean, we expect high interest in the performance of Singapore and other Asian countries. Given the comparative size of Singapore in relation to the world map, we will include the option to view only the performance of countries within Asia, making it easier for visitors to view the performance of smaller countries such as Singapore.</p>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>Exploratory data analysis will first be performed to draw insights on historical relationships between parameters (e.g.&nbsp;GDP, population size) and outcome (Olympic medal count), both by country and sport. Equally of interest is if the impact of these variables on outcome, changed over time. This is give user an idea on the patterns of country and athletes participating in different sports.</p>
<p><em>Number of medals won vs GDP per capita</em></p>
<p>A bubble chart can be built from “country level dataset” to visualise the relationship between GDP per capita vs Number of Medals Won. This can proof that hypothesis that whether countries’ wealth is related to the number of medals won by a country. X axis represents the medal count per M capita and Y axis for GDP per capita. The slider on the left allows user to select different years and the size of the bubble represents the population size. We will also add tool tip to show the additional information such as GDP, GDP per capita and the population information of each country. See below for the prototype.</p>
<p><img src="MedalCountvGDPpercapita.jpg" class="img-fluid"></p>
<p><em>Average Height and Weight of Athletes by Sport</em></p>
<p>We can also build a scatter plot by using the “sports level dataset” to illustrate the relationship between height and weight for all sports type. The purpose is to understand the athletes profile of each sports. The radar box on the left allows user to select the view for female and male separately, because different gender could have different athlete profile.</p>
<p><img src="mockup_scatterplot.JPG" class="img-fluid"></p>
</section>
<section id="correlation-analysis" class="level2">
<h2 class="anchored" data-anchor-id="correlation-analysis">Correlation Analysis</h2>
<p>Thissection is to explore the correlation between parameters. This will help us to select the right parameter for the later Clustering analysis and help us to exclude the parameters that might lead to multicollinearity.</p>
<p><em>Bivariate Analysis</em></p>
<p>Bivariate analysis will be conducted on parameters (X variables) against medal won (Y variable). We will include parameters such as height, sex, weight, age from sports level data set, and GDP, GDP per Capita, population size, land area, inflation rate from “country level dataset”. The filter at the left allows user to choose the statistical method to calculate the correlation and choose different parameters. Below is a mockup of the dashboard.</p>
<p><img src="mockup_bivariate.JPG" class="img-fluid"></p>
<p><em>Multivariate Analysis</em></p>
<p>Multivariate analysis will be conducted on different parameters to calculate correlation. The purpose is to help us to remove highly dependent variables which will lead to multicollinearity when performing predictive analysis. The left bar allows users to select variables for the multivariate analysis and also the statistical method. The right chart display the correlation value with highly correlated coloured in green and low correlation coloured in red. The chart is dynamic base on the parameters selected on the left. We can also use other visual diagram such as correlogram to reveal the pair relationship of the variables.</p>
<p><img src="mockup_multivariate.JPG" class="img-fluid"></p>
</section>
<section id="country-clustering-analysis" class="level2">
<h2 class="anchored" data-anchor-id="country-clustering-analysis">Country Clustering Analysis</h2>
<p>Cluster Analysis will be conducted on the country level dataset to classify countries into smaller clusters for the purpose of building a prediction model (described in section 4 below). The assumption here is that countries that are too diverse in nature (e.g, Olympic powerhouses like the United States vs smaller city states like Singapore) tend to exhibit varying characteristics, which may result in building an inappropriate model. As such, there is a need to build the predictive model at a more granular level (i.e., cluster level) in order to achieve a greater degree of prediction accuracy.</p>
<p>We will explore visualisation methods such as dendrograms and heatmaps, and identify the ideal method for our app.</p>
</section>
<section id="predictive-modelling" class="level2">
<h2 class="anchored" data-anchor-id="predictive-modelling">Predictive Modelling</h2>
<p>Two regression models will be built.</p>
<p><strong><em>Model 1: Country Regression View</em></strong></p>
<p>The first regression model to be built incorporates the country perspective and seeks to address key questions such as how many athletes and sports a country should participate in, in order to maximise the number of Olympic medals won. We plan to build a regression model based on the following variables:</p>
<table class="table">
<colgroup>
<col style="width: 7%">
<col style="width: 92%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Dependent</td>
<td>Olympic Medal Count (Gold, Silver and Bronze each contributes 1 count)</td>
</tr>
<tr class="even">
<td>Independent</td>
<td><p><em>Uncontrollable:</em> Population size, Land Area of Country, Average Population BMI, GDP, Inflation Rate, CO2 Emissions, Energy Use, Government Expenditure on Education</p>
<p><em>Controllable:</em> Number of Athletes to Field, Number of Sports to Participate In</p></td>
</tr>
</tbody>
</table>
<p><img src="exampleregressionmodel.jpg" class="img-fluid"></p>
<p>With the regression model built from historical and other countries' data, this can be applied to a specific country's context. With fixed (i.e., uncontrollable) inputs such as a country's population size and land area, controllable inputs like number of athletes to field, number of sports to participate in can be passed to predict the medal count (output).</p>
<p><strong><em>Model 2: Sports Regression View</em></strong></p>
<p>At times, the difference between success and failure in the Olympics hinges on having the right body type to suit that particular sport. For example, marathon runners are typically light and lean, while weightlifters tend to be more compact and muscular. This regression model will attempt to predict the medal count for a given sport based on an athlete's basic biometric information. We plan to build a regression model based on the following variables:</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Dependent</td>
<td>Olympic Medal Count (Gold, Silver and Bronze each contributes 1 count)</td>
</tr>
<tr class="even">
<td>Independent</td>
<td>Height, Weight, Age, Gender</td>
</tr>
</tbody>
</table>
<p>The regression model leverages on historical Olympic medallist data to explain the relationship of the independent input variables on the dependent variable. Users of this model will be able to understand how an athlete's biometric circumstance can affect his / her medalling prospects. From a governmental standpoint, this can also be relevant for athlete selection for the Olympics.</p>
</section>
<section id="packages-required" class="level2">
<h2 class="anchored" data-anchor-id="packages-required">Packages Required</h2>
<p>We minimally expect to use at least the following packages:</p>
<p><em>dplyr, tidyverse, ggplot, ggstatsplot, corrplot, gganimate, DT, ggiraph</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>